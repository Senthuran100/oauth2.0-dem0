(this["webpackJsonpoauth2.0"]=this["webpackJsonpoauth2.0"]||[]).push([[0],{41:function(n,e,t){"use strict";t.r(e);var o,i=t(0),c=t(21),r=t.n(c),a=t(14),s=t(10),l=t(2),d=t(11),h=t(13),p=t(1);function g(){var n=Object(i.useContext)(S),e=n.state,t=n.dispatch;if(!e.isLoggedIn)return Object(p.jsx)(l.a,{to:"/login"});var o=e.user,c=o.avatar_url,r=o.name,a=o.public_repos,s=o.followers,d=o.following;return Object(p.jsx)(j,{children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("button",{onClick:function(){t({type:"LOGOUT"})},children:"Logout"}),Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("img",{src:c,alt:"Avatar"}),Object(p.jsx)("span",{children:r}),Object(p.jsxs)("span",{children:[a," Repos"]}),Object(p.jsxs)("span",{children:[s," Followers"]}),Object(p.jsxs)("span",{children:[d," Following"]})]})})]})})}var u,j=h.a.section(o||(o=Object(d.a)(["\n.container{\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  font-family: Arial;\n\n  button{\n    all: unset;\n    width: 100px;\n    height: 35px;\n    margin: 10px 10px 0 0;\n    align-self: flex-end;\n    background-color: #0041C2;\n    color: #fff;\n    text-align: center;\n    border-radius: 3px;\n    border: 1px solid #0041C2;\n\n    &:hover{\n      background-color: #fff;\n      color: #0041C2;\n    }\n  }\n\n  >div{\n    height: 100%;\n    width: 100%;\n    display: flex;\n    font-size: 18px;\n    justify-content: center;\n    align-items: center;\n\n    .content{\n      display: flex;\n      flex-direction: column;\n      padding: 20px 100px;    \n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      width: auto;\n  \n      img{\n        height: 150px;\n        width: 150px;\n        border-radius: 50%;\n      }\n  \n      >span:nth-child(2){\n        margin-top: 20px;\n        font-weight: bold;\n      }\n  \n      >span:not(:nth-child(2)){\n        margin-top: 8px;\n        font-size: 14px;\n      }\n  \n    }\n\n  }\n}\n"]))),x=t(7),b=t(25),f=t.n(b),O=t(18),m=t.n(O);function y(){var n=Object(i.useContext)(S),e=n.state,t=n.dispatch,o=Object(i.useState)({errorMessage:"",isLoading:!1}),c=Object(a.a)(o,2),r=c[0],s=c[1],d=e.client_id,h=e.redirect_uri,g=e.client_secret;return Object(i.useEffect)((function(){var n=window.location.href,e=n.includes("?code=");if(console.log("Method1"),e){var t=n.split("?code=");window.history.pushState({},null,t[0]),s(Object(x.a)(Object(x.a)({},r),{},{isLoading:!0})),console.log("Method2");var o={code:t[1]},i=new FormData;i.append("client_id",d),i.append("client_secret",g),i.append("code",o.code),i.append("redirect_uri",h),console.log("Method3",i),m()("https://github.com/login/oauth/access_token",{method:"POST",headers:{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"},mode:"no-cors",body:i}).then((function(n){console.log("response",n.text()),n.text()})).then((function(n){console.log("paramsString",n);var e=new URLSearchParams(n).get("access_token");return console.log("Access Token",e),m()("https://api.github.com/user",{headers:{Authorization:"token ".concat(e)}})})).catch((function(n){console.log("Error",n),s({isLoading:!1,errorMessage:"Sorry! Login failed"})}))}}),[e,t,r]),e.isLoggedIn?Object(p.jsx)(l.a,{to:"/"}):Object(p.jsx)(v,{children:Object(p.jsx)("section",{className:"container",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Welcome"}),Object(p.jsx)("span",{children:"Super amazing app"}),Object(p.jsx)("span",{children:r.errorMessage}),Object(p.jsx)("div",{className:"login-container",children:r.isLoading?Object(p.jsx)("div",{className:"loader-container",children:Object(p.jsx)("div",{className:"loader"})}):Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("a",{className:"login-link",href:"https://github.com/login/oauth/authorize?scope=user&client_id=".concat(d,"&redirect_uri=").concat(h),onClick:function(){s(Object(x.a)(Object(x.a)({},r),{},{errorMessage:""}))},children:[Object(p.jsx)(f.a,{}),Object(p.jsx)("span",{children:"Login with GitHub"})]})})})]})})})}var v=h.a.section(u||(u=Object(d.a)(["\n  .container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100vh;\n    font-family: Arial;\n    \n\n    > div:nth-child(1) {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\n      transition: 0.3s;\n      width: 25%;\n      height: 45%;\n\n      > h1 {\n        font-size: 2rem;\n        margin-bottom: 20px;\n      }\n\n      > span:nth-child(2) {\n        font-size: 1.1rem;\n        color: #808080;\n        margin-bottom: 70px;\n      }\n\n      > span:nth-child(3) {\n        margin: 10px 0 20px;\n        color: red;\n      }\n\n      .login-container {\n        background-color: #000;\n        width: 70%;\n        border-radius: 3px;\n        color: #fff;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        > .login-link {\n          text-decoration: none;\n          color: #fff;\n          text-transform: uppercase;\n          cursor: default;\n          display: flex;\n          align-items: center;          \n          height: 40px;\n\n          > span:nth-child(2) {\n            margin-left: 5px;\n          }\n        }\n\n        .loader-container {\n          display: flex;\n          justify-content: center;\n          align-items: center;          \n          height: 40px;\n        }\n\n        .loader {\n          border: 4px solid #f3f3f3;\n          border-top: 4px solid #3498db;\n          border-radius: 50%;\n          width: 12px;\n          height: 12px;\n          animation: spin 2s linear infinite;\n        }\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      }\n    }\n  }\n"]))),w={isLoggedIn:JSON.parse(localStorage.getItem("isLoggedIn"))||!1,user:JSON.parse(localStorage.getItem("user"))||null,client_id:"981f7cc6e29083d7a88f",redirect_uri:"http://senthuran100.github.io/oauth2.0-dem0/login",client_secret:"fbc97754b976a1c0a9fe3986340c9fd5ea5000ee",proxy_url:"http://localhost:5000/authenticate"},L=function(n,e){switch(e.type){case"LOGIN":return localStorage.setItem("isLoggedIn",JSON.stringify(e.payload.isLoggedIn)),localStorage.setItem("user",JSON.stringify(e.payload.user)),Object(x.a)(Object(x.a)({},n),{},{isLoggedIn:e.payload.isLoggedIn,user:e.payload.user});case"LOGOUT":return localStorage.clear(),Object(x.a)(Object(x.a)({},n),{},{isLoggedIn:!1,user:null});default:return n}},S=Object(i.createContext)();var _=function(){var n=Object(i.useReducer)(L,w),e=Object(a.a)(n,2),t=e[0],o=e[1];return Object(p.jsx)(S.Provider,{value:{state:t,dispatch:o},children:Object(p.jsx)(s.a,{children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/login",component:y}),Object(p.jsx)(l.b,{path:"/",component:g})]})})})};r.a.render(Object(p.jsx)(_,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.96bdbf9e.chunk.js.map